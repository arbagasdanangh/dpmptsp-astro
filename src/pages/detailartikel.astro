---
export const prerender = false;

import MainLayout from "../../layouts/MainLayout.astro";

const BASE_URL = "http://parkir.dpmptsp-surabaya.my.id";
const { slug } = Astro.params;

let post = null;

try {
  const res = await fetch(`${BASE_URL}/api/v1/posts/${slug}`);

  if (!res.ok) {
    throw new Error("Artikel tidak ditemukan");
  }

  const json = await res.json();
  post = json.data;
} catch (err) {
  console.error("Gagal mengambil artikel:", err);
  throw new Response("Artikel tidak ditemukan", { status: 404 });
}
---
